import requests

class JsonPlaceholderClient:
    base_url = "https://jsonplaceholder.typicode.com"

    def __init__(self):
        self.session = requests.Session()

    def _get(self, endpoint):
        try:
            response = self.session.get(f"{self.base_url}/{endpoint}", timeout=5)
            response.raise_for_status()
            return response.json()
        except requests.exceptions.RequestException as e:
            print(f"Error fetching {endpoint}: {e}")
            return None
        
    def get_posts(self):
        return self._get("posts")
    
    def get_post(self, post_id):
        return self._get(f"posts/{post_id}")
    

if __name__ == "__main__":

    client = JsonPlaceholderClient()
    posts = client.get_posts()
    print(f"Nombre total : {len(posts)}")

    post = client.get_post(1)
    print(f"Post #{post['id']} : {post['title']}")
    print(f"Body #{post['id']} : {post['body']}")

    